<!DOCTYPE html>
<html lang="ko">
<head>
    <%- include('header') %>
    <script src="https://unpkg.com/hangul-js" type="text/javascript"></script>
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
        }

        body {
            background-color: #1c1d22;
        }

        .hidden {
            display: none;
        }

        .blinking {
            animation: blink 0.5s infinite;
        }

        @keyframes blink {
            0% {
                opacity: 1;
            }


            50% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @media (max-width: 800px) {
            .introduce_box {
                flex-direction: column !important;
            }
            
            .text_area {
                font-size: 1.5em !important;
            }
            
            .introduce_img {
                height: 100dvh;
            }
        }

        .introduce_box {
            display: flex;
            flex-direction: row;
            justify-content: center;
            background-color: #1c1d22;
            height: 60dvh;
            color: white;
        }

        .introduce_text {
            display: flex;
            align-items: center;
            float: right;
            width: 100dvw;
            padding: 50px;
        }

        .text_area {
            vertical-align: middle;
            margin-bottom: 10px;
            font-size: 2em;
        }

        #text_title, #text_description1, #text_description2 {
            word-break: keep-all;
        }

        .introduce_img {
            float: left;
            height: 60dvh;
            overflow-y: hidden;
        }

        .introduce_img > img {
            width: 100%;
            transition: cubic-bezier(.29,.08,.29,1) 1s;
        }
    </style>
</head>
<body>
    <div class="main">
        <div class="introduce">
            <div class="introduce_box">
                <div class="introduce_img">
                    <img id="image" src="/discord.png">
                </div>
                <div class="introduce_text">
                    <div>
                        <div class="text_area">
                            <span id="text_title"></span><span id="cursor1" class="blinking">|</span><br>
                            <span id="text_description1"></span><span id="cursor2" class="blinking hidden">|</span><br>
                            <span id="text_description2"></span><span id="cursor3" class="blinking hidden">|</span><br>
                        </div>
                        <button class="btn btn-primary">웹후크 등록 · 수정</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const title_disassemble = Hangul.d('마훅');
        const desc_disassemble1 = Hangul.d('한글 번역된 마후마후 트윗을,')
        const desc_disassemble2 = Hangul.d('디스코드에서');

        window.addEventListener('load', page_onLoad)

        let title_interval;
        let desc_interval;

        let char_idx = 0;
        
        const title_span = document.getElementById('text_title');
        const title_cursor = document.getElementById('cursor1');
        const description1_span = document.getElementById('text_description1');
        const description2_span = document.getElementById('text_description2');
        const description1_cursor = document.getElementById('cursor2');
        const description2_cursor = document.getElementById('cursor3');
        const image_element = document.getElementById('image')
        let pos = 5;
        
        function page_onLoad() {
            title_interval = setInterval(title_typing, 200);
            setInterval(() => {
                image_element.style.transform = `translateY(-${pos}%)`;
                pos = (pos + 5) % 100;
            }, 2500)
        }

        function title_typing() {
            title_span.innerText = Hangul.a(title_disassemble.slice(0,char_idx));
            char_idx++;
            if(char_idx >= title_disassemble.length + 1) {
                clearInterval(title_interval);
                title_cursor.classList.add('hidden')
                description1_cursor.classList.remove('hidden');
                char_idx = 0;
                setTimeout(() => desc_interval = setInterval(desc_typing, 30), 500);
            }
        }

        function desc_typing() {
            description1_span.innerText = Hangul.a(desc_disassemble1.slice(0, char_idx));
            char_idx++;
            if (char_idx >= desc_disassemble1.length + 1) {
                clearInterval(desc_interval);
                description1_cursor.classList.add('hidden')
                description2_cursor.classList.remove('hidden');
                char_idx = 0;
                setTimeout(() => desc_interval = setInterval(desc2_typing, 30), 500);
            }
        }

        function desc2_typing() {
            description2_span.innerText = Hangul.a(desc_disassemble2.slice(0, char_idx));
            char_idx++;
            if (char_idx >= desc_disassemble2.length + 1) {
                clearInterval(desc_interval);
                char_idx = 0;
            }
        }
    </script>
</body>
</html>